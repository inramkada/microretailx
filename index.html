<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>XSHADOW OPS</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: black;
      overflow: hidden;
    }
    canvas {
      display: block;
    }
    .title {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-family: monospace;
      font-size: clamp(18px, 2.5vw, 40px);
      z-index: 10;
      pointer-events: none;
      text-align: center;
    }
  </style>
</head>
<body>
  <canvas id="canvas"></canvas>
  <div class="title">XSHADOWS_OPS<br><strong>by microretailX</strong></div>

  <script>
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");
    let width = canvas.width = window.innerWidth;
    let height = canvas.height = window.innerHeight;

    window.addEventListener("resize", () => {
      width = canvas.width = window.innerWidth;
      height = canvas.height = window.innerHeight;
    });

    const mouse = { x: -9999, y: -9999 };
    window.addEventListener("mousemove", e => {
      mouse.x = e.clientX;
      mouse.y = e.clientY;
    });

    const particles = [];
    const NUM_PARTICLES = 20;
    const SPEED = 0.5;
    const xZoneMargin = 40;

    function inXZone(x, y) {
      const d1 = Math.abs(y - (x * height / width));
      const d2 = Math.abs(y - (height - x * height / width));
      return (d1 < xZoneMargin || d2 < xZoneMargin);
    }

    function randomHex() {
      return "#" + Math.floor(Math.random() * 0xffffff).toString(16).padStart(6, '0');
    }

    function createParticle() {
      let x, y;
      do {
        x = Math.random() * width;
        y = Math.random() * height;
      } while (inXZone(x, y));
      return {
        x, y,
        ox: x, oy: y,
        vx: (Math.random() - 0.5) * SPEED,
        vy: (Math.random() - 0.5) * SPEED,
        radius: 2,
        hex: randomHex(),
        inX: false,
        launched: false
      };
    }

    for (let i = 0; i < NUM_PARTICLES; i++) {
      particles.push(createParticle());
    }

    function drawConnections() {
      for (let i = 0; i < particles.length; i++) {
        let connections = 0;
        for (let j = i + 1; j < particles.length && connections < 3; j++) {
          const dx = particles[i].x - particles[j].x;
          const dy = particles[i].y - particles[j].y;
          const dist = Math.sqrt(dx * dx + dy * dy);
          if (dist < 120) {
            ctx.strokeStyle = `rgba(0,255,255,${1 - dist / 120})`;
            ctx.beginPath();
            ctx.moveTo(particles[i].x, particles[i].y);
            ctx.lineTo(particles[j].x, particles[j].y);
            ctx.stroke();
            connections++;
          }
        }
      }
    }

    function drawTriangleOverlay() {
      const o = Math.random() * 0.2 + 0.05;
      ctx.fillStyle = `rgba(255,255,255,${o})`;
      ctx.beginPath();
      ctx.moveTo(width / 2, height * 0.2);
      ctx.lineTo(width * 0.3, height * 0.8);
      ctx.lineTo(width * 0.7, height * 0.8);
      ctx.closePath();
      ctx.fill();

      ctx.fillStyle = `rgba(255,255,255,${o + 0.1})`;
      ctx.font = "bold 20px monospace";
      ctx.textAlign = "center";
      ctx.fillText("i2 ANALYST + YOLOv8 ACTIVATED", width / 2, height * 0.5);
    }

    function animate() {
      ctx.fillStyle = "black";
      ctx.fillRect(0, 0, width, height);
      drawConnections();

      let inXCount = 0;

      for (const p of particles) {
        const dx = p.x - mouse.x;
        const dy = p.y - mouse.y;
        const dist = Math.sqrt(dx * dx + dy * dy);
        if (dist < 100) {
          const force = (100 - dist) * 0.005;
          p.vx += dx / dist * force;
          p.vy += dy / dist * force;
        }

        const wasInX = p.inX;
        p.inX = inXZone(p.x, p.y);
        if (p.inX) inXCount++;

        if (p.inX && !wasInX && !p.launched) {
          const tx = width / 2, ty = height / 2;
          const d = Math.sqrt((tx - p.x)**2 + (ty - p.y)**2);
          p.vx += (tx - p.x) / d * 2;
          p.vy += (ty - p.y) / d * 2;
          p.launched = true;
        }

        if (!p.inX && wasInX) {
          p.hex = randomHex();
          p.launched = false;
        }

        p.vx += (p.ox - p.x) * 0.001;
        p.vy += (p.oy - p.y) * 0.001;
        p.vx *= 0.97;
        p.vy *= 0.97;

        p.x += p.vx;
        p.y += p.vy;

        ctx.fillStyle = "white";
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
        ctx.fill();

        if (p.inX) {
          ctx.font = "10px monospace";
          ctx.fillText("viulenza", p.x + 8, p.y - 6);
          ctx.fillText(p.hex, p.x + 8, p.y + 6);
        }
      }

      if (inXCount >= 20) {
        drawTriangleOverlay();
      }

      requestAnimationFrame(animate);
    }

    animate();
  </script>
</body>
</html>
