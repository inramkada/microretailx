<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MICRORETAILX</title>

  <meta name="referrer" content="no-referrer">
  <meta http-equiv="Permissions-Policy"
        content="geolocation=(), microphone=(), camera=(), payment=(), usb=()">

  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: #000;
      overflow: hidden;
      color: #fff;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
                   "Liberation Mono", "Courier New", monospace;
    }

    canvas {
      display: block;
      width: 100vw;
      height: 100vh;
    }

    /* === UI LAYER === */
    .ui-layer {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 10;
    }

    .top-bar {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      padding: 14px 18px;
      display: flex;
      justify-content: flex-start;
      background: rgba(0,0,0,0.78);
      border-bottom: 1px solid rgba(255,255,255,0.10);
      backdrop-filter: blur(10px);
    }

    .brand {
      font-size: 12px;
      letter-spacing: 4px;
      font-weight: 800;
      opacity: 0.92;
      color: rgba(255,255,255,0.92);
      mix-blend-mode: difference;
    }

    .footer-bar {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 14px 18px 12px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      background: rgba(0,0,0,0.78);
      border-top: 1px solid rgba(255,255,255,0.10);
      backdrop-filter: blur(10px);
      pointer-events: auto;
    }

    .footer-links {
      display: flex;
      gap: 22px;
      font-size: 11px;
      letter-spacing: 2px;
      opacity: 0.65;
    }

    .footer-links a {
      color: #fff;
      text-decoration: none;
      opacity: 0.75;
    }

    .footer-links a:hover {
      opacity: 1;
      text-decoration: underline;
    }

    .copyright {
      font-size: 9px;
      letter-spacing: 1px;
      opacity: 0.45;
      text-align: center;
    }
  </style>
</head>

<body>
<canvas id="canvas"></canvas>

<div class="ui-layer">
  <div class="top-bar">
    <div class="brand">MICRORETAILX</div>
  </div>

  <div class="footer-bar">
    <div class="footer-links">
      <a href="terms.html">TERMS</a>
      <a href="privacy.html">PRIVACY</a>
      <a href="cookies.html">COOKIES</a>
      <a href="legal.html">LEGAL</a>
    </div>
    <div class="copyright">
      © 2023–2026 MICRORETAILX LLC. ALL RIGHTS RESERVED.
    </div>
  </div>
</div>

<script>
(() => {
  "use strict";

  const canvas = document.getElementById("canvas");
  const ctx = canvas.getContext("2d", { alpha: false });

  let W = 0, H = 0;
  function resize(){
    W = innerWidth; H = innerHeight;
    const dpr = Math.min(2, devicePixelRatio || 1);
    canvas.width = W * dpr;
    canvas.height = H * dpr;
    canvas.style.width = W+"px";
    canvas.style.height = H+"px";
    ctx.setTransform(dpr,0,0,dpr,0,0);
  }
  addEventListener("resize", resize);

  // === Sweep state ===
  let active = false;
  let t0 = 0;
  let cooldown = 0;

  const SWEEP_IN = 0.9;   // seconds inward
  const HOLD    = 0.25;  // flash duration
  const SWEEP_OUT= 0.7;  // seconds outward

  function drawX(alpha){
    ctx.strokeStyle = `rgba(0,234,255,${alpha})`;
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(0,0); ctx.lineTo(W,H);
    ctx.moveTo(W,0); ctx.lineTo(0,H);
    ctx.stroke();
  }

  function sweepLine(progress){
    ctx.strokeStyle = `rgba(0,234,255,${0.25 * (1-progress)})`;
    ctx.lineWidth = 3;
    ctx.beginPath();

    ctx.moveTo(0,0);
    ctx.lineTo(W*progress, H*progress);

    ctx.moveTo(W,0);
    ctx.lineTo(W*(1-progress), H*progress);

    ctx.moveTo(0,H);
    ctx.lineTo(W*progress, H*(1-progress));

    ctx.moveTo(W,H);
    ctx.lineTo(W*(1-progress), H*(1-progress));

    ctx.stroke();
  }

  canvas.addEventListener("pointerdown", e=>{
    const a = e.target.closest && e.target.closest("a");
    if (a) return;

    const now = performance.now();
    if (now < cooldown) return;

    active = true;
    t0 = now;
    cooldown = now + 900; // coherence cooldown
  }, { passive:true });

  function loop(now){
    ctx.fillStyle = "#000";
    ctx.fillRect(0,0,W,H);

    if (active){
      const t = (now - t0) / 1000;

      if (t < SWEEP_IN){
        const p = t / SWEEP_IN;
        sweepLine(p);
      }
      else if (t < SWEEP_IN + HOLD){
        const k = 1 - (t - SWEEP_IN)/HOLD;
        drawX(0.35 * k);
      }
      else if (t < SWEEP_IN + HOLD + SWEEP_OUT){
        const p = 1 - (t - SWEEP_IN - HOLD)/SWEEP_OUT;
        sweepLine(p);
      }
      else{
        active = false;
      }
    }

    requestAnimationFrame(loop);
  }

  resize();
  requestAnimationFrame(loop);
})();
</script>
</body>
</html>
