<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SYSTEM UPGRADE | MICRORETAILX</title>
  <style>
    :root {
      --accent: #00f2ff;
      --bg: #000;
    }
    html, body {
      margin: 0; padding: 0; height: 100%;
      background: var(--bg); overflow: hidden;
      color: #fff; font-family: "JetBrains Mono", "Fira Code", monospace;
    }
    canvas { display:block; width:100vw; height:100vh; filter: contrast(1.1) brightness(1.1); }

    .ui-layer { position: fixed; inset: 0; pointer-events: none; z-index: 10; }

    .top-bar {
      position: absolute; top: 0; left: 0; right: 0;
      padding: 20px 30px;
      display: flex; justify-content: space-between;
      background: linear-gradient(to bottom, rgba(0,0,0,0.9), transparent);
      border-top: 2px solid var(--accent);
    }

    .brand {
      font-size: 10px; letter-spacing: 6px; font-weight: 900;
      text-transform: uppercase; color: var(--accent);
      text-shadow: 0 0 10px rgba(0, 242, 255, 0.5);
    }

    .status-tag {
      font-size: 9px; color: rgba(255,255,255,0.5);
      display: flex; align-items: center; gap: 8px;
    }
    .dot { width: 6px; height: 6px; background: var(--accent); border-radius: 50%; animation: pulse 1.5s infinite; }

    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }

    .footer-bar {
      position: absolute; bottom: 0; left: 0; right: 0;
      padding: 20px 30px;
      background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);
      pointer-events: auto;
    }

    .footer-links { display: flex; gap: 25px; font-size: 10px; letter-spacing: 2px; margin-bottom: 10px; }
    .footer-links a { color: rgba(255,255,255,0.6); text-decoration: none; transition: 0.3s; }
    .footer-links a:hover { color: var(--accent); }

    .copyright { font-size: 8px; opacity: 0.3; letter-spacing: 1px; }
  </style>
</head>
<body>

  <canvas id="view"></canvas>

  <div class="ui-layer">
    <div class="top-bar">
      <div class="brand">Protocol: Maintenance</div>
      <div class="status-tag"><span class="dot"></span> System Live</div>
    </div>

    <div class="footer-bar">
      <div class="footer-links">
        <a href="#">ACCESS_CORE</a>
        <a href="#">ENCRYPT_KEY</a>
        <a href="#">TERMINAL</a>
      </div>
      <div class="copyright">© 2026 MICRORETAILX LLC // REPLICANT_ENGINE_V2</div>
    </div>
  </div>

  <script>
    // 
    (() => {
      "use strict";
      const view = document.getElementById("view");
      const vctx = view.getContext("2d");
      const simCanvas = document.createElement("canvas");
      const sctx = simCanvas.getContext("2d");

      let W, H, simW, simH, dpr;
      let trail = [], agents = [];
      const CFG = {
        agentCount: window.innerWidth < 600 ? 8000 : 15000,
        sensorDist: 10,
        sensorAngle: 0.6,
        turnSpeed: 0.4,
        decay: 0.96,
        deposit: 0.8
      };

      function resize() {
        dpr = window.devicePixelRatio || 1;
        W = window.innerWidth; H = window.innerHeight;
        view.width = W * dpr; view.height = H * dpr;
        simW = Math.floor(W / 2); simH = Math.floor(H / 2);
        simCanvas.width = simW; simCanvas.height = simH;
        trail = new Float32Array(simW * simH).fill(0);
        seed();
      }

      function seed() {
        agents = [];
        for(let i=0; i<CFG.agentCount; i++) {
          agents.push({
            x: Math.random() * simW,
            y: Math.random() * simH,
            a: Math.random() * Math.PI * 2
          });
        }
      }

      function step() {
        for (let a of agents) {
          // Lógica de sensores simplificada pero agresiva
          const look = (angle) => {
            const x = Math.floor(a.x + Math.cos(a.a + angle) * CFG.sensorDist);
            const y = Math.floor(a.y + Math.sin(a.a + angle) * CFG.sensorDist);
            if (x < 0 || x >= simW || y < 0 || y >= simH) return -1;
            return trail[y * simW + x];
          };

          const f = look(0), l = look(CFG.sensorAngle), r = look(-CFG.sensorAngle);
          if (f > l && f > r) {} 
          else if (l > r) a.a += CFG.turnSpeed;
          else if (r > l) a.a -= CFG.turnSpeed;
          else a.a += (Math.random() - 0.5) * 0.2;

          a.x += Math.cos(a.a); a.y += Math.sin(a.a);
          if (a.x < 0) a.x = simW - 1; if (a.x >= simW) a.x = 0;
          if (a.y < 0) a.y = simH - 1; if (a.y >= simH) a.y = 0;

          trail[Math.floor(a.y) * simW + Math.floor(a.x)] += CFG.deposit;
        }

        for (let i = 0; i < trail.length; i++) trail[i] *= CFG.decay;
      }

      function draw() {
        const imgData = sctx.createImageData(simW, simH);
        for (let i = 0; i < trail.length; i++) {
          const val = trail[i] * 255;
          const idx = i * 4;
          imgData.data[idx] = val * 0.2;     // R: Sutil
          imgData.data[idx + 1] = val * 0.8; // G: Cian base
          imgData.data[idx + 2] = val;       // B: Brillante
          imgData.data[idx + 3] = 255;
        }
        sctx.putImageData(imgData, 0, 0);
        vctx.clearRect(0,0, view.width, view.height);
        vctx.drawImage(simCanvas, 0, 0, view.width, view.height);
      }

      function loop() {
        step();
        draw();
        requestAnimationFrame(loop);
      }

      window.addEventListener('resize', resize);
      resize();
      loop();
    })();
  </script>
</body>
</html>
