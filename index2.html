<!doctype html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>microretailX</title>

  <meta name="referrer" content="no-referrer" />
  <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()" />
  <meta name="color-scheme" content="dark" />

  <style>
    :root{
      --bg:#000;
      --fg:rgba(255,255,255,.94);
      --hair:rgba(255,255,255,.12);
      --glass:rgba(0,0,0,.78);
      --px:clamp(12px, 2vw, 18px);
      --py:10px;
      --menu-bg: rgba(0,0,0,.86);
      --menu-border: rgba(255,255,255,.14);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }

    body{
      margin:0;
      background:var(--bg);
      color:var(--fg);
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
      -webkit-font-smoothing: antialiased;
    }

    header{
      padding: var(--py) var(--px);
      border-bottom:1px solid var(--hair);
      background:var(--glass);
      backdrop-filter: blur(10px);
    }

    nav{
      display:flex;
      align-items:center;
      gap:12px;
      flex-wrap:wrap;
    }

    .lang-switch{ position:relative; }

    .lang-trigger{
      width:28px;height:28px;
      border:0;background:none;color:#fff;
      border-radius:10px;cursor:pointer;
    }

    .lang-rail{
      --rail-shift:0px;
      position:absolute;
      right: calc(100% + 10px);
      top:50%;
      transform: translateY(-50%) translateX(var(--rail-shift));

      display:flex;
      align-items:center;
      gap:8px;

      padding:6px 8px;
      border:1px solid var(--menu-border);
      background:var(--menu-bg);
      border-radius:999px;

      max-width: min(780px, calc(100vw - 40px));
      overflow-x:auto;
      white-space:nowrap;

      opacity:0;
      pointer-events:none;
      transition:opacity .3s ease;
    }

    .lang-switch.is-open .lang-rail{
      opacity:1;
      pointer-events:auto;
    }

    .lang-pill{
      height:26px;
      padding:0 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.1);
      background:rgba(0,0,0,.3);
      color:rgba(255,255,255,.86);
      font-size:11px;
      letter-spacing:.12em;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }

    /* =========================
       AR MODE ‚Äì ESTABLE (5 idiomas)
       ========================= */
    html.mx-ar-basic .lang-rail{
      overflow-x:hidden !important;
      white-space:nowrap;
      direction:ltr;
      unicode-bidi:isolate;
      gap:6px !important;
      padding:5px 6px !important;
    }

    html.mx-ar-basic .lang-rail .lang-pill{
      display:none !important;
    }

    html.mx-ar-basic .lang-rail .lang-pill[data-lang="en"],
    html.mx-ar-basic .lang-rail .lang-pill[data-lang="zh"],
    html.mx-ar-basic .lang-rail .lang-pill[data-lang="es"],
    html.mx-ar-basic .lang-rail .lang-pill[data-lang="ru"],
    html.mx-ar-basic .lang-rail .lang-pill[data-lang="pt"]{
      display:inline-flex !important;
    }

    html.mx-ar-basic .lang-pill{
      height:24px !important;
      padding:0 8px !important;
      font-size:10px !important;
      letter-spacing:.10em !important;
    }

    /* RTL layout */
    [dir="rtl"] nav{ flex-direction:row-reverse; }
  </style>
</head>

<body>
<header>
  <nav>
    <div class="lang-switch" id="lang-switch">
      <button class="lang-trigger" type="button">üåê</button>
      <div class="lang-rail" id="lang-rail">
        <button class="lang-pill" data-lang="en">EN</button>
        <button class="lang-pill" data-lang="zh">ZH</button>
        <button class="lang-pill" data-lang="es">ES</button>
        <button class="lang-pill" data-lang="hi">HI</button>
        <button class="lang-pill" data-lang="ar">AR</button>
        <button class="lang-pill" data-lang="fr">FR</button>
        <button class="lang-pill" data-lang="pt">PT</button>
        <button class="lang-pill" data-lang="ru">RU</button>
        <button class="lang-pill" data-lang="ja">JA</button>
        <button class="lang-pill" data-lang="de">DE</button>
        <button class="lang-pill" data-lang="ca">CA</button>
        <button class="lang-pill" data-lang="id">ID</button>
      </div>
    </div>
  </nav>
</header>

<script>
(function(){
  const RTL_LANGS = new Set(["ar"]);
  const DEFAULT_LANG = "en";
  const key = "mx_lang";

  function getLang(){ return localStorage.getItem(key) || DEFAULT_LANG; }
  function setLang(l){ localStorage.setItem(key,l); }

  function applyLang(lang){
    const html = document.documentElement;
    html.lang = lang;
    html.dir  = RTL_LANGS.has(lang) ? "rtl" : "ltr";

    // üîí activar modo √°rabe b√°sico
    html.classList.toggle("mx-ar-basic", lang === "ar");

    const rail = document.getElementById("lang-rail");
    if (lang === "ar" && rail) rail.scrollLeft = 0;
  }

  applyLang(getLang());

  document.querySelectorAll(".lang-pill").forEach(btn=>{
    btn.addEventListener("click",()=>{
      const lang = btn.dataset.lang || DEFAULT_LANG;
      setLang(lang);
      applyLang(lang);
      document.getElementById("lang-switch").classList.remove("is-open");
    });
  });

  document.querySelector(".lang-trigger")
    .addEventListener("click",()=>{
      document.getElementById("lang-switch")
        .classList.toggle("is-open");
    });
})();
</script>
</body>
</html>
