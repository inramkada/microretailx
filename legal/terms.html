<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MICRORETAILX | TERMS OF USE [MRX-TOU-2026-01-01 V2]</title>
  <style>
    html, body{
      margin:0;
      padding:0;
      background:#000;
      overflow:hidden;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
    }
    canvas{ display:block; transition: filter 1.2s ease-in-out, opacity 1.2s ease-in-out; }
    body.consent-locked canvas{ filter: grayscale(1) brightness(0.72) contrast(1.08); opacity: 0.85; }
    body.consent-waking canvas{ filter: grayscale(0) brightness(1) contrast(1); opacity: 1; }
    /* HARD LOCK: disable interaction with anything behind the consent UI */
    body.consent-locked .terms-wrap,
    body.consent-locked .footer-bar{
      pointer-events:none;
    }
    body.consent-locked .consent-banner,
    body.consent-locked .consent-banner *,
    body.consent-locked .consent-modal,
    body.consent-locked .consent-modal *,
    body.consent-locked .consent-modal-backdrop{
      pointer-events:auto;
    }


    .ui-layer{ position:absolute; z-index:10; color:#fff; user-select:none; }

    .footer-bar{
      bottom:0; left:0; width:100%;
      background: rgba(0,0,0,.92);
      display:flex; flex-direction:column; align-items:center;
      padding:10px 0 8px; box-sizing:border-box;
      pointer-events:none;
    }
    .footer-links{ font-size:15px; pointer-events:auto; margin-bottom:6px; }
    .footer-links a{ color:#fff; text-decoration:none; margin:0 12px; opacity:.85; cursor:pointer; }
    .footer-links a:hover{ opacity:1; text-decoration:underline; }
    .copyright{
      font-size:9px; letter-spacing:1px; opacity:.45;
      pointer-events:auto; text-align:center; padding:0 14px; line-height:1.35;
    }

    @media (max-width: 600px){
      .footer-links{ font-size:13px; }
      .copyright{ font-size:8px; }
    }

    @media (prefers-reduced-motion: reduce){
      canvas{ transition:none !important; }
      body.consent-locked .consent-banner.open{ animation:none !important; }
    }

    .consent-banner{
      position:fixed; left:0; right:0; bottom:0;
      z-index:9999;
      background: rgba(0,0,0,.92);
      border-top:1px solid rgba(255,255,255,.15);
      box-shadow: 0 -10px 34px rgba(0,0,0,.65);
      backdrop-filter: blur(10px);
      padding:14px 18px; box-sizing:border-box;
      display:none;
    }
    .consent-banner.open{ display:block; }

    .consent-row{ display:flex; gap:14px; align-items:center; justify-content:space-between; flex-wrap:wrap; }
    .consent-text{ color:#e8ffff; opacity:.92; font-size:13px; line-height:1.4; max-width:860px; }
    .consent-text a{ color:#fff; text-decoration:none; opacity:.95; text-shadow:0 0 10px rgba(255,255,255,.35); }
    .consent-text a:hover{ text-decoration:underline; opacity:1; }

    .consent-actions{ display:flex; gap:10px; flex-wrap:wrap; }
    .consent-btn{
      appearance:none;
      border:1px solid rgba(255,255,255,.22);
      background: rgba(255,255,255,.06);
      color:#fff;
      padding:9px 12px; border-radius:10px;
      cursor:pointer;
      font-family: inherit;
      letter-spacing:.5px; font-size:12px;
      opacity:.95;
    }
    .consent-btn:hover{ opacity:1; box-shadow:0 0 18px rgba(255,255,255,.12); }
    .consent-btn.primary{
      border-color: rgba(255,255,255,.42);
      background: rgba(255,255,255,.12);
      box-shadow:0 0 22px rgba(255,255,255,.18);
    }
    
    .consent-modal-backdrop{
      position:fixed; inset:0; z-index:10000;
      background: rgba(0,0,0,.74);
      display:none;
      align-items:center; justify-content:center;
      padding:18px; box-sizing:border-box;
    }
    .consent-modal-backdrop.open{ display:flex; }

    .consent-modal{
      width:min(720px,100%);
      border-radius:16px;
      background: rgba(0,8,18,.94);
      border:1px solid rgba(255,255,255,.22);
      box-shadow: 0 0 40px rgba(255,255,255,.10);
      backdrop-filter: blur(14px);
      overflow:hidden;
    }
    .consent-modal-header{
      display:flex; align-items:center; justify-content:space-between;
      padding:14px 16px;
      border-bottom:1px solid rgba(255,255,255,.12);
    }
    .consent-modal-title{ font-size:13px; letter-spacing:1px; color:#fff; opacity:.95; }
    .consent-modal-close{
      width:30px; height:30px; border-radius:10px;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.06);
      color:#fff; cursor:pointer; font-family: inherit; font-size:14px; opacity:.9;
    }
    .consent-modal-close:hover{ opacity:1; }
    .consent-modal-body{
      padding:14px 16px 8px;
      color:#e8ffff; font-size:13px; line-height:1.45; opacity:.93;
    }
    .consent-cats{ display:grid; gap:10px; margin-top:10px; }
    .consent-cat{
      display:flex; gap:12px; align-items:flex-start; justify-content:space-between;
      padding:10px 12px;
      border:1px solid rgba(255,255,255,.10);
      border-radius:14px;
      background: rgba(255,255,255,.03);
    }
    .consent-cat strong{ display:block; font-size:12px; letter-spacing:.7px; color:#fff; opacity:.95; margin-bottom:4px; }
    .consent-cat p{ margin:0; font-size:12px; opacity:.86; max-width:520px; }

    .toggle{
      position:relative; width:44px; height:24px; flex:0 0 auto;
      border-radius:24px;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.07);
      cursor:pointer; margin-top:2px;
    }
    .toggle::after{
      content:""; position:absolute; top:2px; left:2px;
      width:18px; height:18px; border-radius:50%;
      background: rgba(255,255,255,.92);
      transition: transform .18s ease;
    }
    .toggle.on{
      border-color: rgba(255,255,255,.35);
      background: rgba(255,255,255,.14);
      box-shadow:0 0 18px rgba(255,255,255,.10);
    }
    .toggle.on::after{ transform: translateX(20px); }
    .toggle.locked{ opacity:.6; cursor:not-allowed; }

    .consent-modal-footer{
      display:flex; gap:10px; justify-content:flex-end; flex-wrap:wrap;
      padding:12px 16px 14px;
      border-top:1px solid rgba(255,255,255,.12);
    }

    body.consent-locked .ui-layer{ pointer-events:none !important; }
    body.consent-locked #consentBanner,
    body.consent-locked #consentModalBackdrop{ pointer-events:auto !important; }
    body.consent-locked .terms-wrap{ pointer-events:auto !important; }

    body.consent-locked .consent-banner{
      left:50%; right:auto; bottom:auto; top:50%;
      transform: translate(-50%,-50%);
      width: min(920px, calc(100% - 36px));
      border-radius:18px;
      border:1px solid rgba(255,255,255,.24);
      box-shadow: 0 0 40px rgba(255,255,255,.10), 0 0 100px rgba(255,255,255,.04);
    }
    @keyframes execPulse{
      0%{ box-shadow: 0 0 38px rgba(255,255,255,.08), 0 0 90px rgba(255,255,255,.03); }
      100%{ box-shadow: 0 0 46px rgba(255,255,255,.14), 0 0 120px rgba(255,255,255,.05); }
    }
    body.consent-locked .consent-banner.open{ animation: execPulse 1.2s ease-in-out infinite alternate; }

    .terms-wrap{
      position:absolute;
      inset:0;
      z-index:9;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:84px 18px 110px;
      box-sizing:border-box;
    }
    .terms-panel{
      width:min(980px, 100%);
      max-height: calc(var(--vh, 1vh) * 100 - 220px);
      overflow:hidden; /* header stays fixed; only inner content scrolls */
      scrollbar-width: none;
      -ms-overflow-style: none;
      background: rgba(0,8,18,.90);
      border: 1px solid rgba(0,234,255,.38);
      box-shadow: 0 0 34px rgba(0,234,255,.22);
      backdrop-filter: blur(12px);
      border-radius: 14px;
      padding: 0;
      color:#fff;
      user-select:text;
      display:flex;
      flex-direction:column;
    }
    .terms-panel::-webkit-scrollbar{ display:none; }

    .terms-scroll{
      flex:1 1 auto;
      overflow:auto;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
      -ms-overflow-style: none;
      padding: 14px 16px 90px; /* clears the fixed footer */
      box-sizing:border-box;
      scroll-padding-top: 140px;
      scroll-padding-bottom: 90px;
    }
    .terms-scroll::-webkit-scrollbar{ display:none; }


    .terms-header{
      position:sticky;
      top:0;
      z-index:10;
      background: rgba(0,8,18,.98); /* opaque so text never shows beneath */
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(0,234,255,.22);
      padding: 14px 16px 10px;
      box-shadow: 0 10px 22px rgba(0,0,0,.35);
    }


    .terms-title{
      font-size:13px;
      letter-spacing:1px;
      text-transform:uppercase;
      margin:0 0 6px;
    }
    .terms-meta{
      font-size:11px;
      line-height:1.55;
      color:#b8faff;
      opacity:.92;
      margin:0;
    }
    .terms-docmeta{
      margin-top:8px;
      font-size:10px;
      letter-spacing:.8px;
      opacity:.62;
      color:#e8ffff;
    }

    .terms-actions.compact{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
      align-items:center;
      margin-top:10px;
    }
    .icon-btn{
      width:30px;height:30px;
      display:inline-flex;align-items:center;justify-content:center;
      border-radius:10px;
      border:1px solid rgba(255,255,255,.10);
      background: transparent;
      color: rgba(255,255,255,.92);
      opacity:.85;
      cursor:pointer;
      transition: opacity .16s ease, border-color .16s ease, background .16s ease;
      padding:0;
      text-decoration:none;
    }
    .icon-btn svg{ width:16px;height:16px; display:block; }
    .icon-btn:hover{
      opacity:1;
      border-color: rgba(255,255,255,.22);
      background: rgba(255,255,255,.04);
    }
    .icon-btn:active{ background: rgba(255,255,255,.06); }
    .icon-btn[disabled]{ opacity:.30; cursor:not-allowed; }
    .icon-btn:focus-visible{
      outline:none;
      border-color: rgba(0,234,255,.40);
      box-shadow:0 0 0 2px rgba(0,234,255,.25);
      opacity:1;
    }

    .terms-body{
      font-size:14.5px;
      line-height:1.85;
      color:#fff;
      opacity:.985;
      text-shadow: 0 0 10px rgba(0,0,0,.35);
      letter-spacing: .1px;
    }
    .terms-body h2{
      margin: 18px 0 8px;
      font-size: 12.8px;
      letter-spacing: 1.3px;
      text-transform: uppercase;
      text-decoration: underline;
      text-decoration-thickness: 1px;
      text-underline-offset: 4px;
      text-decoration-color: rgba(184,250,255,.75);
      opacity: 1;
    }
    .terms-body p{ margin: 10px 0; }
    .terms-body ul{ margin: 8px 0 8px 18px; }
    .terms-body .secno{ color:#b8faff; opacity:.88; margin-right:8px; }
    .mono{ letter-spacing:.3px; }

    .privacy-toast{
      position: fixed;
      left:50%;
      bottom: 86px;
      transform: translate(-50%, 10px);
      max-width: min(720px, calc(100% - 36px));
      background: rgba(0,8,18,.92);
      border: 1px solid rgba(0,234,255,.22);
      border-radius: 14px;
      padding: 10px 12px;
      color:#e8ffff;
      font-size: 12px;
      line-height: 1.35;
      letter-spacing: .3px;
      opacity: 0;
      pointer-events: none;
      z-index: 9998;
      backdrop-filter: blur(12px);
      transition: opacity .18s ease, transform .18s ease;
    }
    .privacy-toast.show{ opacity: .96; transform: translate(-50%, 0); }

    @media print{
      body{ background:#fff !important; overflow:visible !important; }
      canvas, .footer-bar, .consent-banner, .consent-modal-backdrop, .privacy-toast{ display:none !important; }
      .terms-wrap{ position:static !important; padding:0 !important; }
      .terms-panel{
        max-height:none !important;
        overflow:visible !important;
        border:none !important;
        box-shadow:none !important;
        background:#fff !important;
        color:#000 !important;
        text-shadow:none !important;
      }
      .terms-header{ position:static !important; border:none !important; background:#fff !important; margin:0 !important; padding:0 0 12px !important; }
      .terms-meta, .terms-docmeta{ color:#000 !important; opacity:1 !important; }
      .terms-body{ color:#000 !important; opacity:1 !important; }
      .terms-body .secno{ color:#000 !important; opacity:1 !important; }
      .terms-body h2{ text-decoration-color: #000 !important; text-decoration-thickness: 1px !important; }
    }

    .footer-links{
      display:flex;
      flex-wrap:wrap;
      justify-content:center;
      align-items:center;
      gap:0;
      text-align:center;
      padding:0 16px;
      line-height:1.9;
    }
    .footer-links a{
      display:inline-block;
      margin:4px 0;
      padding:0 10px;
      position:relative;
    }
    .footer-links a:not(:last-child)::after{
      content:"·";
      position:absolute;
      right:-2px;
      top:50%;
      transform:translateY(-52%);
      opacity:.38;
    }

    @media (max-width: 600px){
      .footer-links{ padding:0 12px; }
      .footer-links a{ padding:0 10px; }
      .footer-links a:not(:last-child)::after{ right:-3px; }
    }

    @media (max-width: 600px){
      .terms-scroll{ -webkit-overflow-scrolling: touch; scroll-padding-top: 140px; }
      .terms-body h2{ scroll-margin-top: 140px; }
      .terms-header{ position: sticky; top: 0; z-index: 5; }
    }
  
/* Back to Top button */
#backToTop {
  position: fixed;
  right: 22px;
  bottom: 78px;
  width: 42px;
  height: 42px;
  border-radius: 50%;
  border: 1px solid rgba(255,255,255,0.25);
  background: rgba(0,0,0,0.65);
  color: #ffffff;
  font-size: 18px;
  cursor: pointer;
  opacity: 0;
  pointer-events: none;
  transform: translateY(8px);
  transition: opacity .25s ease, transform .25s ease, background .25s ease;
  z-index: 9999;
}
#backToTop.show {
  opacity: 1;
  pointer-events: auto;
  transform: translateY(0);
}
#backToTop:hover {
  background: rgba(255,255,255,0.12);
}


/* Ensure internal scroll area clears the fixed footer */
#termsScroll, .terms-scroll {
  padding-bottom: 90px;
  box-sizing: border-box;
  scroll-padding-bottom: 90px;
}

</style>
</head>

<body>
  <canvas id="canvas"></canvas>

  <div class="terms-wrap">
    <div class="terms-panel" id="termsPanel">
      <div class="terms-header">
        <div class="terms-title">TERMS OF USE (GLOBAL)</div>
        <div class="terms-meta">
          MICRORETAILX LLC (Delaware, USA)<br/>
          MicroretailX Group – Global Operations Framework<br/>
          <span class="mono">Last updated:</span> 2026-01-01 · <span class="mono">Effective date:</span> 2026-01-01
          <div class="terms-docmeta">Document ID: MRX-TOU-2026-01-01 · Version: 2</div>
        </div>

        <div class="terms-actions compact">
          <button class="icon-btn" id="printPDF" type="button" aria-label="Download (Print dialog)" title="Download (Print dialog)">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M12 3v10m0 0l4-4m-4 4L8 9" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M5 15v4h14v-4" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>

          <button class="icon-btn" id="ttsPlay" type="button" aria-label="Play audio" title="Listen">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M8 5v14l11-7z" fill="currentColor"/></svg>
          </button>
          <button class="icon-btn" id="ttsPause" type="button" aria-label="Pause/Resume audio" title="Pause" disabled>
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M7 5h3v14H7zM14 5h3v14h-3z" fill="currentColor"/></svg>
          </button>
          <button class="icon-btn" id="ttsStop" type="button" aria-label="Stop audio" title="Stop" disabled>
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M7 7h10v10H7z" fill="currentColor"/></svg>
          </button>

          <a class="icon-btn" href="../index.html" aria-label="Home" title="Home">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M10 19l-7-7 7-7" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M3 12h18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </a>
        </div>
      </div>

      <div class="terms-scroll" id="termsScroll"><div class="terms-body" id="termsText">

        <h2>Definitions</h2>
        <p>For the purposes of these Terms:</p>
        <p>“MICRORETAILX”, “we”, “us”, “our” means <strong>MICRORETAILX LLC</strong>, a Delaware limited liability company.</p>
        <p>“Website” means this website and any associated pages, subdomains, interactive elements, code, visuals, outputs, and content, including any future features, interfaces, environments, or components made available by us.</p>
        <p>“MICRORETAILX GROUP” means an operational framework used to describe current and/or future projects, brands, initiatives, research efforts, and teams collaborating across jurisdictions. It is a descriptive term and is not, by default, a separate legal entity unless expressly identified as such in writing by MICRORETAILX LLC.</p>
        <p>“Verticals” means thematic domains used as a conceptual and strategic classification framework (e.g., research, technology, industrial systems, biotech), and <strong>do not</strong> by themselves constitute business units, regulated activities, products, services, or operational establishments.</p>
        <p>“Content” includes any text, graphics, designs, source code, visualisations, simulations, models, workflows, documentation, and any materials made available through the Website.</p>
        <p>“Submissions” means any feedback, suggestions, ideas, proposals, or materials you provide to us.</p>

        <h2>Operator, Scope, and Acceptance</h2>
        <p>These Terms of Use (“Terms”) govern your access to and use of the Website. By accessing or using the Website, you confirm that you have read and understood these Terms and agree to be bound by them. If you do not agree, you must not use the Website.</p>
        <p>You represent that you have the legal capacity to enter into these Terms under the laws applicable to you. If you are using the Website on behalf of an organisation, you represent that you are authorised to bind that organisation.</p>

        <h2>Operator Identity, Legal Seat, and Address for Notices</h2>
        <p>This Website is operated and controlled exclusively by <strong>MICRORETAILX LLC</strong>, a limited liability company duly organised and validly existing under the laws of the State of Delaware, United States of America.</p>
        <p><strong>Registered Office &amp; Registered Agent (Delaware):</strong><br/>
          Corporation Trust Center, 1209 Orange Street, Wilmington, DE 19801, United States of America.<br/>
          Formal legal notices and service of process may be validly served through the Registered Agent in the State of Delaware.
        </p>
        <p>For any legal, compliance, regulatory, or formal matters relating to the Website, communications must be directed exclusively to: <a href="mailto:legal@microretailx.com">legal@microretailx.com</a></p>
        <p><strong>Clarity of references.</strong> No other address, location, reference to “nodes”, “labs”, “sites”, “countries”, “regions”, or “verticals” shall be interpreted as a place of business, establishment, office, branch, headquarters, or operational presence of MICRORETAILX LLC.</p>

        <h2>Global Operating Model; No Partnership; No Agency</h2>
        <p>MICRORETAILX operates globally and may conduct projects, research, and collaborations in multiple jurisdictions.</p>
        <p>Unless expressly stated in a written agreement executed by an authorised representative of MICRORETAILX LLC: (i) nothing on the Website creates any partnership, joint venture, agency, fiduciary, or employment relationship; (ii) no party is authorised to bind MICRORETAILX LLC; and (iii) references to “group”, “network”, “verticals”, “teams”, “partners”, “entities”, “nodes”, or similar are descriptive and do not, by themselves, create a legal relationship or separate legal person.</p>

        <h2>Status of the Website; No Offer; No Commitment</h2>
        <p>The Website is provided for informational, conceptual, and exploratory purposes only. Nothing on the Website constitutes an offer to sell, a solicitation of an offer to buy, an investment proposal, or a commitment to provide products, services, funding, infrastructure, or any form of commercial arrangement.</p>
        <p>Any engagement, transaction, service, or operationalisation (if any) will occur only through separate written agreements and, where applicable, duly constituted entities in compliance with local laws.</p>
        <h2>Jurisdictional Notice; No Targeting; No Solicitation (USA · EU/EEA/UK · UAE)</h2>
        <p><strong>Global availability; no targeting.</strong> The Website is published as a globally accessible informational interface. Unless we expressly state otherwise in a written agreement executed by an authorised representative of MICRORETAILX LLC, the Website is not directed to, and does not constitute a targeted solicitation or marketing to, any particular country, jurisdiction, or category of person.</p>
        <p><strong>No invitation; no securities offering.</strong> Nothing on the Website constitutes (i) an offer of securities, (ii) an invitation to invest, (iii) “financial promotion”, (iv) a public offering, or (v) an invitation to engage in any regulated financial activity in any jurisdiction. Any potential investment, financing, partnership, or strategic engagement (if any) will occur only pursuant to separate written agreements and applicable regulatory approvals, where required.</p>
        <p><strong>EU/EEA/UK notice.</strong> Where EU/EEA/UK rules apply, any mandatory consumer and data protection rights remain unaffected. The Website should not be construed as establishing a commercial presence, establishment, branch, or permanent establishment in the EU/EEA/UK by reason of mere accessibility or use.</p>
        <p><strong>UAE notice.</strong> If you access the Website from the United Arab Emirates (including any Emirate or free zone), you acknowledge that the Website is informational and is not an offer, promotion, or solicitation in the UAE. Any local projects, pilots, or engagements (if any) will be implemented only through appropriate local entities and documentation, and in compliance with applicable UAE laws and regulatory requirements.</p>


        <h2>Verticals Framework (Conceptual and Non-Operational)</h2>
        <p>References to “Verticals” are used exclusively as a conceptual, strategic, and technical classification framework. Each Vertical represents a thematic domain for exploration, modelling, design, research, or visualisation.</p>
        <p>Verticals do <strong>not</strong>, by themselves, constitute: (i) lines of business; (ii) regulated operations; (iii) products or service offerings; (iv) operational units; (v) subsidiaries; or (vi) evidence of facilities, personnel, licences, permits, registrations, or commercial readiness in any jurisdiction.</p>
        <p>Any future operationalisation of a Vertical (if any) will occur only through separately constituted legal entities and/or independent legal documentation, duly registered, licensed, and regulated as required by applicable local law.</p>

        <h2>Zero Data Strategy (Privacy-by-Design Commitment)</h2>
        <p>The Website is engineered under a Zero Data Strategy by default. In practical terms: no accounts are required; no visitor profiling is performed by default; no third-party tracking is activated by default; and optional analytics/marketing technologies are disabled by default and may be activated only after explicit, granular user consent (where required).</p>
        <p>This approach implements privacy-by-design and data minimisation principles, including where applicable under GDPR/ePrivacy frameworks. Limited technical processing may still occur strictly for security, integrity, abuse prevention, and delivery (e.g., infrastructure-level request metadata), as described below and in the Privacy/Cookies pages (incorporated by reference).</p>

        <h2>Cookies, Similar Technologies and Consent (EU/EEA/UK ePrivacy Standard)</h2>
        <p><span class="mono">7.1</span> The Website may use strictly necessary cookies or similar technologies required to deliver the Website and core functionality, maintain security and integrity, and store consent choices. Where applicable, these do not require consent when strictly necessary for the service requested by the user.</p>
        <p><span class="mono">7.2</span> Any non-essential technologies (including analytics and marketing) are deployed only where you provide prior consent through the Website’s Cookie Preferences interface. You may refuse or withdraw consent at any time.</p>
        <p><span class="mono">7.3</span> For technical transparency, where the Website displays a Consent Reference / Audit-ID (e.g., “CONSENT-REF”) after an opt-in, you may view that reference in the Website footer. This reference is a technical transparency token and is not intended to identify visitors.</p>
        <p><span class="mono">7.4</span> More detail is provided in the Website’s Privacy and Cookies pages (incorporated by reference).</p>

        <h2>Hosting, Delivery, and Security Layers (GitHub Pages + Cloudflare)</h2>
        <p>The Website is hosted and delivered via third-party infrastructure (including static hosting such as GitHub Pages or equivalent) and may be routed through security and delivery layers (including Cloudflare or equivalent providers). These providers may perform caching, content delivery, traffic routing, rate limiting, and security filtering (e.g., WAF and anti-abuse controls) to maintain availability and protect against malicious or automated traffic.</p>
        <p><strong>Security and technical logs.</strong> Limited technical logs and security telemetry may be processed by infrastructure and security providers and/or by MICRORETAILX LLC solely for security, integrity, troubleshooting, performance, and abuse prevention. Such processing is not used for behavioural profiling or advertising and is retained only as long as reasonably necessary for the stated purposes, unless longer retention is required by law.</p>
        <p><strong>No local establishment by mere access.</strong> The Website is made available globally as an informational interface. Mere accessibility from a jurisdiction does not, by itself, mean that MICRORETAILX LLC conducts business, targets residents, or maintains an establishment in that jurisdiction. Mandatory local consumer and data protection rules, where applicable, remain unaffected.</p>

        <h2>Permitted Use; Prohibited Conduct (Platform-Grade)</h2>
        <p>You agree to use the Website lawfully and in a manner consistent with these Terms. You must not:</p>
        <ul>
          <li>attempt unauthorised access, circumvention of security layers, or bypassing rate-limits/WAF controls;</li>
          <li>scan, scrape, harvest, crawl, spider, mirror, or use automated means to extract, copy, or reproduce the Website or its Content at scale;</li>
          <li>reverse engineer, decompile, disassemble, or otherwise attempt to derive source code, underlying structure, or non-public aspects of the Website;</li>
          <li>probe, test, or attempt to exploit vulnerabilities (including “security research” without our prior written permission);</li>
          <li>introduce malicious code, interfere with performance/availability, or generate abusive traffic (including stress-testing);</li>
          <li>use the Website to violate applicable law or third-party rights.</li>
        </ul>
        <p><strong>Algorithmic/logic protection; trade secret boundary.</strong> Without limiting the foregoing, you must not perform or attempt any model extraction, algorithmic behaviour analysis, benchmarking, profiling, replay at scale, or other testing intended to infer, replicate, approximate, or reconstruct the Website’s underlying logic, methods, rules, parameters, simulations, outputs, data structures, or decisioning as embodied in the interface or Content.</p>
        <p>We may restrict, suspend, or block access where we reasonably determine it is necessary for security, compliance, operational integrity, or the protection of our rights and the rights of others.</p>

        <h2>Preservation, Takedown, and Enforcement</h2>
        <p><strong>Protective actions.</strong> We may take any reasonable technical, operational, and legal measures to protect the Website, Content, and our rights, including rate limiting, blocking, suspending access, geo-filtering, and disabling features, without prior notice where necessary for security, integrity, compliance, or abuse prevention.</p>
        <p><strong>Preservation of evidence.</strong> Where we reasonably believe that unlawful, abusive, or unauthorised activity has occurred (including scraping, circumvention, or interference), we may preserve relevant technical data and security telemetry (to the extent available) for the limited purpose of investigating, enforcing these Terms, protecting the Website, and/or establishing or defending legal claims. Any such preservation will be limited to what is reasonably necessary and retained only for as long as required for those purposes, unless longer retention is required by law.</p>
        <p><strong>Takedown / removal.</strong> We may remove, disable, or restrict access to any Content or functionality where we reasonably consider it necessary for compliance, risk mitigation, rights protection, or operational integrity. This section does not create any duty to monitor the Website or remove Content.</p>
        <p><strong>No waiver.</strong> Failure to enforce any provision of these Terms shall not constitute a waiver of any rights.</p>

        <h2>Intellectual Property; Trade Secrets; Reservation of Rights</h2>
        <p>All rights, title, and interest in and to the Website and its Content—including code, generative code, visualisation engines, mathematical logic, animations, designs, text, logos, marks, and trade dress—are owned by MICRORETAILX LLC and/or its licensors and are protected by intellectual property laws worldwide.</p>
        <p><strong>For avoidance of doubt</strong>, the Website and its Content include (without limitation) system and network architectures, distributed node concepts, workflows, orchestration logic, simulations, interface outputs, data schemas, and related know-how embodied in code, configuration, interface, or documentation. Such elements may constitute proprietary intellectual property and/or trade secrets of MICRORETAILX LLC to the maximum extent permitted by law.</p>
        <p>No licence is granted except a limited, revocable, non-transferable right to access and view the Website for lawful purposes. Any reproduction, distribution, modification, public display, reverse engineering, creation of derivative works, or competing implementation based on the Website or Content without prior written consent is prohibited.</p>

        <h2>Confidentiality of Non-Public Materials</h2>
        <p>From time to time, the Website may make available certain materials that are designated as non-public, confidential, restricted, or otherwise not intended for broad distribution (including technical documents, datasets, specifications, roadmaps, prototypes, private previews, or access-controlled resources) (“Non-Public Materials”).</p>
        <p><strong>No licence; no distribution.</strong> Unless we expressly authorise otherwise in writing, you must not copy, reproduce, distribute, publish, transmit, sell, sublicense, display, or make available any Non-Public Materials to any third party.</p>
        <p><strong>Security and handling.</strong> You must implement reasonable safeguards to prevent unauthorised access to Non-Public Materials and notify us promptly if you become aware of any loss, leakage, or unauthorised disclosure.</p>
        <p><strong>Trade secrets preserved.</strong> Any unauthorised disclosure or use of Non-Public Materials may cause irreparable harm and may constitute misappropriation of trade secrets and/or confidential information. Nothing in this section limits any remedies available to MICRORETAILX LLC.</p>
        <p>This section applies only to materials clearly designated or reasonably understood as non-public and does not convert public Website content into confidential information.</p>

        <h2>Submissions and Feedback</h2>
        <p>If you submit ideas, feedback, suggestions, or other materials (collectively, “Submissions”), you grant MICRORETAILX a worldwide, perpetual, irrevocable, royalty-free, transferable licence to use, reproduce, modify, distribute, and otherwise exploit such Submissions for any lawful purpose, without compensation, to the extent permitted by applicable law. You represent that your Submissions do not infringe third-party rights and do not contain unlawful content.</p>

        <h2>External Links; Third-Party Services</h2>
        <p>The Website may link to third-party sites or services. MICRORETAILX does not control and is not responsible for third-party content, policies, security, or practices. Your use of third-party services is at your own risk and subject to their terms.</p>

        <h2>Disclaimers (No Advice; No Offer; No Reliance)</h2>
        <p>The Website is provided for informational and exploratory purposes only. Nothing on the Website constitutes legal, tax, financial, investment, medical, scientific, engineering, technical, or professional advice; an offer to sell or solicitation of an offer to buy any product, security, or service; or a commitment to provide services, funding, infrastructure, or any form of commercial arrangement.</p>
        <p><strong>No reliance.</strong> You should not rely on the Website as a substitute for independent professional advice, technical validation, regulatory assessment, or due diligence.</p>
        <p><strong>Biological/biotech context notice.</strong> Any scientific, technical, or biological references (including those relating to organisms, substrates, processing, nutrition, or outputs) are provided for high-level informational purposes only and do not constitute biosecurity guidance, food safety advice, medical advice, or regulatory compliance instructions. You remain solely responsible for verifying applicability under local laws, standards, and safety requirements (including allergen and occupational safety considerations).</p>
        <p>Any forward-looking statements are inherently uncertain and may change without notice.</p>

        <h2>Availability; “As Is” and “As Available”</h2>
        <p>To the maximum extent permitted by law, the Website and all Content are provided “as is” and “as available”, without warranties of any kind, whether express or implied, including merchantability, fitness for a particular purpose, and non-infringement. We do not guarantee uninterrupted availability, error-free operation, or compatibility across all devices, browsers, networks, or jurisdictions.</p>

        <h2>Limitation of Liability</h2>
        <p>To the maximum extent permitted by applicable law, MICRORETAILX LLC shall not be liable for any indirect, incidental, special, consequential, exemplary, or punitive damages, including loss of profits, revenue, data, goodwill, or business interruption, arising from or relating to the Website or Content, even if advised of the possibility of such damages.</p>
        <p>Where liability cannot be excluded, it shall be limited to the minimum extent permitted by law.</p>

        <h2>Indemnity</h2>
        <p>You agree to indemnify and hold harmless MICRORETAILX LLC from and against claims, liabilities, damages, losses, and expenses (including reasonable legal fees) arising from your unlawful use of the Website, breach of these Terms, or infringement of third-party rights.</p>

        <h2>Compliance, Export Controls, and Sanctions</h2>
        <p>You agree to comply with all applicable laws, regulations, and rules in connection with your access to and use of the Website, including export control and sanctions laws.</p>
        <p><strong>Export controls.</strong> The Website and/or certain Content may constitute or include “technology” or “software” subject to export control regimes, including (without limitation) U.S. Export Administration Regulations (EAR) and other applicable controls (and, where relevant, EU/UK dual-use or similar regimes). You must not access, use, export, re-export, transfer, or make available any controlled Content in violation of applicable export control laws.</p>
        <p><strong>Sanctions.</strong> You must not access or use the Website if you are (i) located in, ordinarily resident in, or organised under the laws of a comprehensively sanctioned jurisdiction, or (ii) subject to sanctions or listed on restricted party lists (including, where applicable, OFAC/UN/EU/UK lists). You represent and warrant that your access and use is not prohibited by applicable sanctions laws.</p>

        <h2>Electronic Communications; Notices; Encrypted Email</h2>
        <p>You consent to receive communications from MICRORETAILX electronically (including by email) and agree that such communications satisfy any legal requirement for written notice where permitted by law.</p>
        <p><strong>Encrypted email communications.</strong> Legal and compliance communications may be transmitted using encrypted email services to enhance confidentiality and integrity of communications; however, no electronic transmission can be guaranteed to be completely secure.</p>
        <p>Legal/compliance notices to MICRORETAILX should be sent to: <span class="mono">Attn: Legal &amp; Compliance — legal@microretailx.com</span></p>

        <h2>Copyright Notice (DMCA / US-Oriented)</h2>
        <p>If you believe that Content on the Website infringes your copyright, you may submit a notice including: identification of the copyrighted work; identification of the allegedly infringing material and its location; your contact information; a statement of good faith belief; a statement under penalty of perjury that the information is accurate and you are authorised to act; and your physical or electronic signature. Send notices to: <a href="mailto:legal@microretailx.com">legal@microretailx.com</a></p>

        <h2>Changes to the Website and Terms</h2>
        <p>We may modify the Website and/or these Terms at any time. The “Last updated” date reflects the most recent version. Continued use after changes constitutes acceptance of the revised Terms. If you do not agree to the revised Terms, you must stop using the Website.</p>

        
        <h2>Class Action Waiver; Jury Trial Waiver (Where Permitted)</h2>
        <p><strong>Where permitted by applicable law</strong> and subject to any non-waivable mandatory local rights (including consumer regimes), you agree that any dispute, claim, or controversy arising out of or relating to the Website or these Terms will be brought in your individual capacity only and not as a plaintiff or class member in any purported class, collective, representative, or private attorney general proceeding.</p>
        <p><strong>Jury trial waiver.</strong> Where permitted by applicable law, you and MICRORETAILX LLC waive any right to a trial by jury in any action or proceeding arising out of or relating to these Terms or the Website.</p>
<h2>Governing Law; Jurisdiction; Mandatory Local Rights</h2>
        <p><span class="mono">22.1</span> These Terms are intended to operate globally. If you are a consumer, or if mandatory local laws apply in your jurisdiction (including consumer protection and data protection rules), those mandatory provisions prevail to the extent they apply and cannot be waived.</p>
        <p><span class="mono">22.2</span> Subject to Section 22.1, these Terms are governed by the laws of the State of Delaware, USA, excluding conflict-of-law rules.</p>
        <p><span class="mono">22.3</span> Subject to Section 22.1, disputes shall be brought in the competent courts located in Delaware, USA. Where mandatory law grants you the right to bring proceedings in your country of residence (including certain consumer regimes), that right is not excluded.</p>

        <h2>Severability; Assignment; Entire Agreement</h2>
        <p>If any provision of these Terms is held invalid or unenforceable, the remainder remains in effect. You may not assign your rights or obligations under these Terms without our prior written consent. We may assign these Terms as part of a corporate reorganisation, transfer of assets, or similar transaction. These Terms, together with documents incorporated by reference (Privacy/Cookies), constitute the entire agreement regarding Website use.</p>

       <h2>Contact</h2>
        <p>
          Legal and compliance notices should be sent to
          <a href="mailto:legal@microretailx.com">legal@microretailx.com</a>.
          Operator details and registered address are set out above.
        </p>


      </div>
    </div>
    </div>
  </div>

  <div class="ui-layer footer-bar">
    <div class="footer-links">
      <a href="terms.html" target="_blank" rel="noopener">Terms</a>
      <a href="privacy.html" target="_blank" rel="noopener">Privacy</a>
      <a href="cookies.html" target="_blank" rel="noopener">Cookies</a>
      <a href="#" id="cookiePreferencesLink">Cookie Preferences</a>
      <a href="legal.html" target="_blank" rel="noopener">Legal</a>
    </div>
    <div class="copyright">© 2023-2025 MICRORETAILX LLC — ALL RIGHTS RESERVED</div>
  </div>

  <div class="privacy-toast" id="privacyToast" role="status" aria-live="polite"></div>

  <div class="consent-banner" id="consentBanner" aria-live="polite">
    <div class="consent-row">
      <div class="consent-text">
        We use necessary cookies to operate this site. With your consent, we may also use analytics and marketing cookies.
        You can change your choice anytime via <a href="#" id="cookiePreferencesInline">Cookie Preferences</a>.
      </div>
      <div class="consent-actions">
        <button class="consent-btn" id="consentReject">Reject</button>
        <button class="consent-btn" id="consentManage">Preferences</button>
        <button class="consent-btn primary" id="consentAccept">Accept</button>
      </div>
    </div>
  </div>

  <div class="consent-modal-backdrop" id="consentModalBackdrop" aria-hidden="true">
    <div class="consent-modal" tabindex="-1" role="dialog" aria-modal="true" aria-label="Cookie Preferences">
      <div class="consent-modal-header">
        <div class="consent-modal-title">COOKIE PREFERENCES</div>
        <button class="consent-modal-close" id="consentModalClose" aria-label="Close">×</button>
      </div>
      <div class="consent-modal-body">
        Choose which optional categories you want to allow. Necessary cookies are always enabled.
        <div class="consent-cats">
          <div class="consent-cat">
            <div>
              <strong>Necessary</strong>
              <p>Required for basic functionality, security and page delivery. Always on.</p>
            </div>
            <div class="toggle on locked" aria-label="Necessary cookies (always on)"></div>
          </div>

          <div class="consent-cat">
            <div>
              <strong>Analytics</strong>
              <p>Helps us understand traffic and improve the Website. Loaded only with your consent.</p>
            </div>
            <div class="toggle" id="toggleAnalytics" role="switch" aria-checked="false" tabindex="0" aria-label="Analytics cookies"></div>
          </div>

          <div class="consent-cat">
            <div>
              <strong>Marketing</strong>
              <p>Enables marketing / tracking technologies. Loaded only with your consent.</p>
            </div>
            <div class="toggle" id="toggleMarketing" role="switch" aria-checked="false" tabindex="0" aria-label="Marketing cookies"></div>
          </div>
        </div>
      </div>
      <div class="consent-modal-footer">
        <button class="consent-btn" id="consentSave">Save</button>
        <button class="consent-btn primary" id="consentAcceptAll">Accept All</button>
      </div>
    </div>
  </div>

  <script>
    "use strict";

    
    // iOS/Safari viewport fix: use --vh based on innerHeight (handles URL bar collapse/expand)
    function setVhVar(){
      const vh = window.innerHeight * 0.01;
      document.documentElement.style.setProperty("--vh", vh + "px");
    }
    setVhVar();
    window.addEventListener("resize", setVhVar, { passive: true });
    window.addEventListener("orientationchange", setVhVar, { passive: true });

const toastEl = document.getElementById("privacyToast");
    let toastTimer = null;
    function showToast(msg){
      if (!toastEl) return;
      toastEl.textContent = msg;
      toastEl.classList.add("show");
      clearTimeout(toastTimer);
      toastTimer = setTimeout(()=>toastEl.classList.remove("show"), 2600);
    }

    function numberSections(){
      const root = document.getElementById("termsText");
      if (!root) return;
      const headings = Array.from(root.querySelectorAll("h2"));
      let major = 0;
      headings.forEach(h => {
        major += 1;
        const span = document.createElement("span");
        span.className = "secno";
        span.textContent = `${major}.`;
        h.prepend(span);
      });
    }
    numberSections();

    const CONSENT_KEY = "mrxx_consent_v1";
    const CONSENT_MAX_DAYS = 365;

    const consentBanner = document.getElementById("consentBanner");
    const consentModalBackdrop = document.getElementById("consentModalBackdrop");
    const cookiePreferencesLink = document.getElementById("cookiePreferencesLink");
    const cookiePreferencesInline = document.getElementById("cookiePreferencesInline");

    const consentReject = document.getElementById("consentReject");
    const consentManage = document.getElementById("consentManage");
    const consentAccept = document.getElementById("consentAccept");

    const consentModalClose = document.getElementById("consentModalClose");
    const consentSave = document.getElementById("consentSave");
    const consentAcceptAll = document.getElementById("consentAcceptAll");

    const toggleAnalytics = document.getElementById("toggleAnalytics");
    const toggleMarketing = document.getElementById("toggleMarketing");

    

    // Accessibility: focus trap for consent modal (prevents tabbing behind the lock)
    let lastActiveEl = null;
    function getFocusable(container){
      if (!container) return [];
      const sel = [
        "a[href]",
        "button:not([disabled])",
        "input:not([disabled])",
        "select:not([disabled])",
        "textarea:not([disabled])",
        "[tabindex]:not([tabindex='-1'])"
      ].join(",");
      return Array.from(container.querySelectorAll(sel)).filter(el => {
        const style = window.getComputedStyle(el);
        return style.visibility !== "hidden" && style.display !== "none";
      });
    }
    function trapFocus(e){
      if (!consentModalBackdrop.classList.contains("open")) return;
      if (e.key !== "Tab") return;
      const modal = consentModalBackdrop.querySelector(".consent-modal");
      const focusables = getFocusable(modal);
      if (!focusables.length) return;
      const first = focusables[0];
      const last = focusables[focusables.length - 1];
      const active = document.activeElement;
      if (e.shiftKey){
        if (active === first || !modal.contains(active)){
          e.preventDefault();
          last.focus();
        }
      } else {
        if (active === last){
          e.preventDefault();
          first.focus();
        }
      }
    }


    function trapFocusBanner(e){
      if (!document.body.classList.contains("consent-locked")) return;
      if (!consentBanner.classList.contains("open")) return;
      if (consentModalBackdrop.classList.contains("open")) return;
      if (e.key !== "Tab") return;
      const focusables = getFocusable(consentBanner);
      if (!focusables.length) return;
      const first = focusables[0];
      const last = focusables[focusables.length - 1];
      const active = document.activeElement;
      if (e.shiftKey){
        if (active === first || !consentBanner.contains(active)){
          e.preventDefault();
          last.focus();
        }
      } else {
        if (active === last){
          e.preventDefault();
          first.focus();
        }
      }
    }

function lockSite(){
      document.body.classList.add("consent-locked");
      document.documentElement.style.overflow = "hidden";
      // Hide background content from screen readers while locked
      const bg = document.querySelector(".terms-wrap");
      const footer = document.querySelector(".footer-bar");
      if (bg) bg.setAttribute("aria-hidden","true");
      if (footer) footer.setAttribute("aria-hidden","true");
    }
    function unlockSite(){
      document.body.classList.remove("consent-locked");
      document.documentElement.style.overflow = "";
      const bg = document.querySelector(".terms-wrap");
      const footer = document.querySelector(".footer-bar");
      if (bg) bg.removeAttribute("aria-hidden");
      if (footer) footer.removeAttribute("aria-hidden");
    }
    function wakeSite(){
      unlockSite();
      void document.body.offsetHeight;
      document.body.classList.add("consent-waking");
      setTimeout(()=>document.body.classList.remove("consent-waking"), 1250);
    }

    // HARD LOCK guards: block any interaction/navigation behind the consent UI until a decision is made
    function isConsentLocked(){
      return document.body.classList.contains("consent-locked");
    }
    function isInsideConsentUI(node){
      return (consentModalBackdrop && consentModalBackdrop.contains(node)) ||
             (consentBanner && consentBanner.contains(node));
    }
    (function installHardLockGuards(){
      // Clicks (links/buttons) behind the consent UI
      document.addEventListener("click", (e)=>{
        if (!isConsentLocked()) return;
        if (isInsideConsentUI(e.target)) return;
        e.preventDefault();
        e.stopPropagation();
        // Keep banner visible and focusable
        if (consentBanner) consentBanner.classList.add("open");
        try { consentAccept && consentAccept.focus({preventScroll:true}); } catch(_){}
      }, true);

      // Keyboard activation behind the consent UI (Enter/Space/etc.)
      document.addEventListener("keydown", (e)=>{
        if (!isConsentLocked()) return;
        if (isInsideConsentUI(e.target)) return;

        // Allow only focus management keys; everything else gets blocked
        const allowed = (e.key === "Tab" || e.key === "Shift" || e.key === "Escape");
        if (!allowed){
          e.preventDefault();
          e.stopPropagation();
        }

        if (e.key === "Escape"){
          e.preventDefault();
          e.stopPropagation();
          if (consentBanner) consentBanner.classList.add("open");
          try { consentAccept && consentAccept.focus({preventScroll:true}); } catch(_){}
        }
      }, true);

      // Wheel / touch scrolling behind the consent UI
      window.addEventListener("wheel", (e)=>{
        if (!isConsentLocked()) return;
        if (isInsideConsentUI(e.target)) return;
        e.preventDefault();
      }, { passive:false, capture:true });

      window.addEventListener("touchmove", (e)=>{
        if (!isConsentLocked()) return;
        if (isInsideConsentUI(e.target)) return;
        e.preventDefault();
      }, { passive:false, capture:true });
    })();

    function setCookie(name, value, days){
      const d = new Date();
      d.setTime(d.getTime() + (days * 24 * 60 * 60 * 1000));
      document.cookie = `${name}=${encodeURIComponent(value)}; expires=${d.toUTCString()}; path=/; SameSite=Lax`;
    }
    function getCookie(name){
      const parts = document.cookie ? document.cookie.split("; ") : [];
      for (const p of parts){
        const idx = p.indexOf("=");
        const k = idx >= 0 ? p.slice(0, idx) : p;
        const v = idx >= 0 ? p.slice(idx + 1) : "";
        if (k === name) return decodeURIComponent(v);
      }
      return null;
    }

    function loadConsent(){
      const ls = localStorage.getItem(CONSENT_KEY);
      if (ls){ try { return JSON.parse(ls); } catch(_){} }
      const ck = getCookie(CONSENT_KEY);
      if (ck){ try { return JSON.parse(ck); } catch(_){} }
      return null;
    }
    function saveConsent(consent){
      const payload = JSON.stringify(consent);
      localStorage.setItem(CONSENT_KEY, payload);
      setCookie(CONSENT_KEY, payload, CONSENT_MAX_DAYS);
    }

    function generateAuditID(){
      return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>
        (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)
      );
    }
    function displayAuditID(id){
      let el = document.getElementById("audit-display");
      if (!el){
        el = document.createElement("div");
        el.id = "audit-display";
        el.style.cssText = "font-size:7px;opacity:0.25;margin-top:8px;letter-spacing:1px;text-transform:uppercase;color:white;";
        document.querySelector(".footer-bar").appendChild(el);
      }
      el.textContent = id ? `CONSENT-REF: ${String(id).toUpperCase()}` : "PREFERENCES: MINIMAL";
    }

    function applyConsent(consent){
      document.documentElement.dataset.analytics = consent.analytics ? "1" : "0";
      document.documentElement.dataset.marketing = consent.marketing ? "1" : "0";
      document.documentElement.dataset.consent = (consent.analytics || consent.marketing) ? "granted" : "denied";
    }

    function setToggle(el, on){
      el.classList.toggle("on", !!on);
      el.setAttribute("aria-checked", String(!!on));
    }

    function openConsentPanel(){
      const current = loadConsent() || { necessary:true, analytics:false, marketing:false, ts:Date.now(), decision:"rejected", auditId:null };
      setToggle(toggleAnalytics, !!current.analytics);
      setToggle(toggleMarketing, !!current.marketing);
      consentModalBackdrop.classList.add("open");
      consentModalBackdrop.setAttribute("aria-hidden", "false");
    
      // Save focus and move focus into modal
      lastActiveEl = document.activeElement;
      const modal = consentModalBackdrop.querySelector(".consent-modal");
      const focusables = getFocusable(modal);
      (focusables[0] || modal).focus({ preventScroll:true });
}

    function closeConsentPanel(){
      consentModalBackdrop.classList.remove("open");
      consentModalBackdrop.setAttribute("aria-hidden", "true");
    
      // Restore focus to where the user was
      if (lastActiveEl && typeof lastActiveEl.focus === "function"){
        try { lastActiveEl.focus({ preventScroll:true }); } catch(_){ try{ lastActiveEl.focus(); }catch(__){} }
      }
      lastActiveEl = null;
}

    function hideBanner(){
      consentBanner.classList.remove("open");
      wakeSite();
    }

    function setAllConsent(val){
      const granted = !!val;
      const consent = {
        necessary:true,
        analytics:granted,
        marketing:granted,
        ts:Date.now(),
        decision: granted ? "accepted" : "rejected",
        auditId: granted ? generateAuditID() : null
      };
      saveConsent(consent);
      applyConsent(consent);
      displayAuditID(consent.auditId);
      hideBanner();
      closeConsentPanel();
    }

    function saveFromPanel(){
      const prev = loadConsent();
      const analytics = toggleAnalytics.classList.contains("on");
      const marketing = toggleMarketing.classList.contains("on");
      const optionalOn = analytics || marketing;

      const consent = {
        necessary:true,
        analytics,
        marketing,
        ts:Date.now(),
        decision: optionalOn ? "accepted" : "rejected",
        auditId: optionalOn ? (prev && prev.auditId ? prev.auditId : generateAuditID()) : null
      };

      saveConsent(consent);
      applyConsent(consent);
      displayAuditID(consent.auditId);
      hideBanner();
      closeConsentPanel();
    }

    function toggleSwitch(el){ setToggle(el, !el.classList.contains("on")); }
    function handleSwitchKey(el, e){
      if (e.key === "Enter" || e.key === " "){ e.preventDefault(); toggleSwitch(el); }
    }

    cookiePreferencesLink.addEventListener("click", (e)=>{ e.preventDefault(); openConsentPanel(); });
    cookiePreferencesInline.addEventListener("click", (e)=>{ e.preventDefault(); openConsentPanel(); });

    consentManage.addEventListener("click", ()=>openConsentPanel());
    consentReject.addEventListener("click", ()=>setAllConsent(false));
    consentAccept.addEventListener("click", ()=>setAllConsent(true));

    consentModalClose.addEventListener("click", ()=>closeConsentPanel());
    consentSave.addEventListener("click", ()=>saveFromPanel());
    consentAcceptAll.addEventListener("click", ()=>setAllConsent(true));

    consentModalBackdrop.addEventListener("click", (e)=>{ if (e.target === consentModalBackdrop) closeConsentPanel(); });
    document.addEventListener("keydown", (e)=>{ if (e.key === "Escape") closeConsentPanel(); });

    
    document.addEventListener("keydown", trapFocus);
    document.addEventListener("keydown", trapFocusBanner);
toggleAnalytics.addEventListener("click", ()=>toggleSwitch(toggleAnalytics));
    toggleMarketing.addEventListener("click", ()=>toggleSwitch(toggleMarketing));
    toggleAnalytics.addEventListener("keydown", (e)=>handleSwitchKey(toggleAnalytics, e));
    toggleMarketing.addEventListener("keydown", (e)=>handleSwitchKey(toggleMarketing, e));

    const existingConsent = loadConsent();
    if (existingConsent){
      applyConsent(existingConsent);
      displayAuditID(existingConsent.auditId);
      wakeSite();
    } else {
      lockSite();
      consentBanner.classList.add("open");
          // Focus primary action for keyboard users
      try { consentAccept.focus({preventScroll:true}); } catch(_) { try{ consentAccept.focus(); }catch(__){} }
}

    function printViaIframe(){
      const content = document.getElementById("termsText")?.innerHTML || "";
      if (!content.trim()){
        showToast("Nothing to print.");
        return;
      }

      const html = `<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>MICRORETAILX TERMS OF USE (MRX-TOU-2025-12-25 V1)</title>
<style>
  html,body{margin:0;padding:0;background:#fff;color:#000;font-family: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;}
  .wrap{padding:18px 20px;}
  @page{ margin:14mm; }
  h2{margin:18px 0 8px;font-size:12.5px;letter-spacing:1px;text-transform:uppercase;text-decoration:underline;text-decoration-thickness:1px;text-underline-offset:4px;}
  .meta{font-size:11px;line-height:1.45;margin-bottom:14px;}
  .body{font-size:13px;line-height:1.75;}
  .secno{margin-right:8px;}

/* Back to Top button */
#backToTop {
  position: fixed;
  right: 22px;
  bottom: 78px;
  width: 42px;
  height: 42px;
  border-radius: 50%;
  border: 1px solid rgba(255,255,255,0.25);
  background: rgba(0,0,0,0.65);
  color: #ffffff;
  font-size: 18px;
  cursor: pointer;
  opacity: 0;
  pointer-events: none;
  transform: translateY(8px);
  transition: opacity .25s ease, transform .25s ease, background .25s ease;
  z-index: 9999;
}
#backToTop.show {
  opacity: 1;
  pointer-events: auto;
  transform: translateY(0);
}
#backToTop:hover {
  background: rgba(255,255,255,0.12);
}


/* Ensure internal scroll area clears the fixed footer */
#termsScroll, .terms-scroll {
  padding-bottom: 90px;
  box-sizing: border-box;
  scroll-padding-bottom: 90px;
}

</style>
</head>
<body>
  <div class="wrap">
    <div class="meta">
      <div><strong>MICRORETAILX LLC</strong> (Delaware, USA)</div>
      <div>MICRORETAILX GROUP – Global Operations Framework</div>
      <div>Last updated: 2025-12-25 · Effective date: 2025-12-25</div>
      <div><strong>CT, 1209 Orange Street, Wilmington, DE 19801, United States of America.</strong></div>
    </div>
    <div class="body">${content}</div>
  </div>

<!-- Back to Top -->
<button id="backToTop" aria-label="Back to top">↑</button>

</body>
</html>`;

      const iframe = document.createElement("iframe");
      iframe.style.position = "fixed";
      iframe.style.right = "0";
      iframe.style.bottom = "0";
      iframe.style.width = "0";
      iframe.style.height = "0";
      iframe.style.border = "0";
      iframe.style.opacity = "0";
      iframe.setAttribute("aria-hidden", "true");
      document.body.appendChild(iframe);

      const doc = iframe.contentWindow.document;
      doc.open();
      doc.write(html);
      doc.close();

      const w = iframe.contentWindow;
      const cleanup = () => { try { document.body.removeChild(iframe); } catch(e){} };
      const tryPrint = () => {
        try { w.focus(); } catch(e){}
        try { w.print(); } catch(e){ cleanup(); }
      };

      w.onafterprint = cleanup;

      if (doc.readyState === "complete") {
        setTimeout(tryPrint, 50);
      } else {
        iframe.onload = () => setTimeout(tryPrint, 50);
        setTimeout(tryPrint, 200);
      }
    }

    const printBtn = document.getElementById("printPDF");
    if (printBtn){
      printBtn.addEventListener("mouseenter", ()=>showToast("Opens Print dialog (Save as PDF)."));
      printBtn.addEventListener("click", ()=>printViaIframe());
    }

    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d", { alpha:false });

    let width = window.innerWidth;
    let height = window.innerHeight;

    const PR = Math.min(2, window.devicePixelRatio || 1);

    function resizeHiDPI(){
      canvas.width = Math.floor(window.innerWidth * PR);
      canvas.height = Math.floor(window.innerHeight * PR);
      canvas.style.width = window.innerWidth + "px";
      canvas.style.height = window.innerHeight + "px";
      ctx.setTransform(PR, 0, 0, PR, 0, 0);
      width = window.innerWidth;
      height = window.innerHeight;
    }
    resizeHiDPI();
    window.addEventListener("resize", resizeHiDPI);

    function clamp(v,a,b){ return Math.max(a, Math.min(b, v)); }
    function easeInOutCubic(t){ return t < 0.5 ? 4*t*t*t : 1 - Math.pow(-2*t+2, 3)/2; }
    function smoothPulse(t){ return 0.5 - 0.5*Math.cos(Math.PI * clamp(t,0,1)); }

    function drawGlowDot(x, y, r, a){
      if (a <= 0) return;
      ctx.save();
      ctx.globalCompositeOperation = "lighter";
      const g = ctx.createRadialGradient(x, y, 0, x, y, r);
      g.addColorStop(0, `rgba(0,234,255,${a})`);
      g.addColorStop(0.35, `rgba(0,234,255,${a*0.35})`);
      g.addColorStop(1, `rgba(0,234,255,0)`);
      ctx.fillStyle = g;
      ctx.beginPath();
      ctx.arc(x, y, r, 0, Math.PI * 2);
      ctx.fill();
      ctx.restore();
    }

    function drawX(alpha){
      ctx.save();
      ctx.strokeStyle = `rgba(0,234,255,${alpha})`;
      ctx.lineWidth = 1.7;
      ctx.beginPath();
      ctx.moveTo(0, 0); ctx.lineTo(width, height);
      ctx.moveTo(width, 0); ctx.lineTo(0, height);
      ctx.stroke();

      ctx.strokeStyle = `rgba(0,234,255,${alpha*0.52})`;
      ctx.lineWidth = 3.2;
      ctx.beginPath();
      ctx.moveTo(0, 0); ctx.lineTo(width, height);
      ctx.moveTo(width, 0); ctx.lineTo(0, height);
      ctx.stroke();
      ctx.restore();
    }

    let phaseT = 0;
    let last = performance.now();

    const PHASE_IN = 2.8;
    const PHASE_HOLD = 1.15;
    const PHASE_OUT = 2.2;
    const PHASE_REST = 0.55;
    const CYCLE = PHASE_IN + PHASE_HOLD + PHASE_OUT + PHASE_REST;

    function lerp(a,b,t){ return a + (b-a)*t; }


    let rafId = null;
    let rafPaused = false;

    function startAnim(){
      if (rafId != null) return;
      rafPaused = false;
      last = performance.now();
      rafId = rafId = requestAnimationFrame(loop);
    }
    function stopAnim(){
      rafPaused = true;
      if (rafId != null){
        cancelAnimationFrame(rafId);
        rafId = null;
      }
    }

    document.addEventListener("visibilitychange", ()=>{
      if (document.visibilityState === "hidden") stopAnim();
      else startAnim();
    });


    function loop(now){
      if (rafPaused) return;
      const dt = Math.min(0.05, (now - last) / 1000);
      last = now;
      phaseT = (phaseT + dt) % CYCLE;

      ctx.fillStyle = "#000";
      ctx.fillRect(0, 0, width, height);

      const cx = width / 2;
      const cy = height / 2;

      const tIn = clamp(phaseT / PHASE_IN, 0, 1);
      const tHold = clamp((phaseT - PHASE_IN) / PHASE_HOLD, 0, 1);
      const tOut = clamp((phaseT - PHASE_IN - PHASE_HOLD) / PHASE_OUT, 0, 1);
      const inActive = phaseT < PHASE_IN;
      const holdActive = phaseT >= PHASE_IN && phaseT < PHASE_IN + PHASE_HOLD;
      const outActive = phaseT >= PHASE_IN + PHASE_HOLD && phaseT < PHASE_IN + PHASE_HOLD + PHASE_OUT;

      const travelIn = easeInOutCubic(tIn);
      const travelOut = easeInOutCubic(tOut);

      const glowUp = smoothPulse(tHold);
      const fadeOut = 1 - smoothPulse(tOut);

      const baseA = 0.045;

      let lineA = baseA;
      if (inActive) lineA = baseA + 0.08 * smoothPulse(tIn);
      if (holdActive) lineA = baseA + 0.18 * glowUp;
      if (outActive) lineA = baseA + 0.14 * fadeOut;

      drawX(lineA);

      const origins = [
        {x:0, y:0},
        {x:width, y:0},
        {x:0, y:height},
        {x:width, y:height}
      ];

      function positionFromOrigin(origin, progress){
        return { x: lerp(origin.x, cx, progress), y: lerp(origin.y, cy, progress) };
      }

      function positionReturnToOrigin(origin, progress){
        return { x: lerp(cx, origin.x, progress), y: lerp(cy, origin.y, progress) };
      }

      const headR = 62;
      const tailSteps = 14;
      const tailSpan = 0.10;

      function drawTrailTo(posFn, prog, alphaScale){
        for (let oi = 0; oi < origins.length; oi++){
          const o = origins[oi];
          const head = posFn(o, prog);
          for (let i = 0; i < tailSteps; i++){
            const k = i / tailSteps;
            const tt = clamp(prog - k*tailSpan, 0, 1);
            const e = easeInOutCubic(tt);
            const p = posFn(o, e);
            const fade = (1 - k);
            drawGlowDot(p.x, p.y, 38 * fade, alphaScale * (0.08 * fade));
          }
          drawGlowDot(head.x, head.y, headR, alphaScale * 0.22);
        }
      }

      if (inActive){
        drawTrailTo(positionFromOrigin, travelIn, 1);
      } else if (holdActive){
        const centerBurst = 0.25 + 0.70 * glowUp;
        drawGlowDot(cx, cy, 120, centerBurst * 0.35);
        drawGlowDot(cx, cy, 78, centerBurst * 0.55);
        drawGlowDot(cx, cy, 44, centerBurst * 0.75);
      } else if (outActive){
        const a = Math.max(0, 0.9 * fadeOut);
        drawTrailTo(positionReturnToOrigin, travelOut, a);
        const centerA = (0.10 + 0.20 * fadeOut);
        drawGlowDot(cx, cy, 78, centerA * 0.35);
      } else {
        const restA = 0.02;
        drawGlowDot(cx, cy, 64, restA);
      }

      rafId = requestAnimationFrame(loop);
    }
    startAnim();

    (function termsAudio(){
      const playBtn = document.getElementById("ttsPlay");
      const pauseBtn = document.getElementById("ttsPause");
      const stopBtn = document.getElementById("ttsStop");
      const termsEl = document.getElementById("termsText");
      if (!playBtn || !pauseBtn || !stopBtn || !termsEl) return;

      const synth = window.speechSynthesis;
      const supported = !!(synth && window.SpeechSynthesisUtterance);
      if (!supported){
        playBtn.disabled = true;
        pauseBtn.disabled = true;
        stopBtn.disabled = true;
        return;
      }

      function setState(state){
        if (state === "idle"){
          playBtn.disabled = false;
          pauseBtn.disabled = true;
          stopBtn.disabled = true;
          pauseBtn.title = "Pause";
        } else if (state === "speaking"){
          playBtn.disabled = true;
          pauseBtn.disabled = false;
          stopBtn.disabled = false;
          pauseBtn.title = "Pause";
        } else {
          playBtn.disabled = true;
          pauseBtn.disabled = false;
          stopBtn.disabled = false;
          pauseBtn.title = "Resume";
        }
      }

      function normalizeText(str){ return (str || "").replace(/\s+/g, " ").trim(); }

      function chunkText(text, maxLen = 900){
        const chunks = [];
        let t = text;
        while (t.length > maxLen){
          let cut = t.lastIndexOf(". ", maxLen);
          if (cut < 200) cut = t.lastIndexOf("; ", maxLen);
          if (cut < 200) cut = t.lastIndexOf(", ", maxLen);
          if (cut < 200) cut = maxLen;
          chunks.push(t.slice(0, cut + 1).trim());
          t = t.slice(cut + 1).trim();
        }
        if (t.length) chunks.push(t);
        return chunks;
      }

      let queue = [];
      function cancelAll(){
        try { synth.cancel(); } catch(_){}
        queue = [];
        setState("idle");
      }

      function speakNext(){
        if (!queue.length){ setState("idle"); return; }
        const part = queue.shift();
        const u = new SpeechSynthesisUtterance(part);
        try{
          const voices = synth.getVoices ? synth.getVoices() : [];
          const enVoice = voices.find(v => /^en(-|_)?/i.test(v.lang || ""));
          if (enVoice) u.voice = enVoice;
          u.lang = enVoice?.lang || "en-US";
        } catch(_){
          u.lang = "en-US";
        }
        u.rate = 1.02;
        u.pitch = 1.0;
        u.volume = 1.0;
        u.onend = ()=>{ if (!synth.paused) speakNext(); };
        u.onerror = ()=>{ speakNext(); };
        setState("speaking");
        synth.speak(u);
      }

      const msg = "Audio runs locally in your browser/device (no uploads, no storage). You can stop anytime.";
      [playBtn, pauseBtn, stopBtn].forEach(el => el.addEventListener("mouseenter", ()=>showToast(msg)));

      playBtn.addEventListener("click", ()=>{
        showToast(msg);
        cancelAll();
        const text = normalizeText(termsEl.innerText);
        if (!text) return;
        queue = chunkText(text, 900);
        speakNext();
      });

      pauseBtn.addEventListener("click", ()=>{
        if (synth.paused){
          try { synth.resume(); } catch(_){}
          setState("speaking");
        } else {
          try { synth.pause(); } catch(_){}
          setState("paused");
        }
      });

      stopBtn.addEventListener("click", ()=>cancelAll());
      window.addEventListener("beforeunload", ()=>{ try { synth.cancel(); } catch(_){} });
      setState("idle");
    })();
  
// Back to Top (terms-panel aware)
window.addEventListener("DOMContentLoaded", () => {
  const backToTop = document.getElementById("backToTop");
  const scrollContainer = document.getElementById("termsPanel") || window;
  if (!backToTop) return;

  function getScrollTop(){
    return scrollContainer === window ? window.scrollY : scrollContainer.scrollTop;
  }

  function scrollToTop(){
    if (scrollContainer === window){
      window.scrollTo({ top: 0, behavior: "smooth" });
    } else {
      scrollContainer.scrollTo({ top: 0, behavior: "smooth" });
    }
  }

  (scrollContainer === window ? window : scrollContainer).addEventListener("scroll", () => {
    if (getScrollTop() > 300) backToTop.classList.add("show");
    else backToTop.classList.remove("show");
  }, { passive: true });

  backToTop.addEventListener("click", scrollToTop);
});

</script>

<!-- Back to Top -->
<button id="backToTop" aria-label="Back to top">↑</button>

</body>
</html>
